<div class="col-md-12">
	<div class="row">

		<!-- LISTA DE RESTAURANTES --> 
		<div class="col-md-9">
			<h3 class="text-center text-default"> Restaurantes </h3>
			<div class="row only-little-margin">
				<div class="col-md-12"  id="panel-buscador">
					<div class="col-md-1">
						<h4 class="text-center text-secondary bold"> Filtrar </h4>
					</div>
					<div class="col-md-4">
						  <select class="form-control" [(ngModel)]="selected" (ngModelChange)="getAll()">
						    <option value="1">Todos los restaurantes</option>
						    <option value="2">Mejor Valoración</option>
						    <option value="3">Mostrar Mapa</option>
						</select>
					</div>
					<div class="col-md-3">
						<h4 class="text-center text-secondary bold"> Buscar por nombre </h4>
					</div>
					<div class="col-md-4">
						<input class="form-control" [(ngModel)]="searchText" placeholder="search text goes here">
					</div>
				</div>
			</div>
			<div class="col-md-12" *ngIf="selected != 3">
				<div class="col-md-6 row-margin" *ngFor="let restaurante of restProp | filterNombre : searchText | paginate: {itemsPerPage: 6, currentPage: p1}">
					<div id="list-panel" class="col-md-12 row">
						<img *ngIf="(restaurante.id_usuario != null) && (restaurante.validado == 1)" class="pull-right img-rest-propietario" src="/assets/imagen/verificado.jpg" title="Restaurante con propietario"/>
						<h3 class="text-center text-primary margin-top-2"> {{restaurante.nombre}} </h3>
						<div class="col-md-4">
							<div *ngIf="restaurante.imagen" class="imagen_container">
										<!--<img src="http://localhost/tfg-lpv/tfg-backend/uploads/{{restaurante.imagen}}" class="restaurante_imagen"/>-->
								<img src="{{restaurante.imagen}}" class="img-rounded imagen-listado"/>
							</div>
							<div *ngIf="!restaurante.imagen" class="imagen_container"> <!--class="imagen_relleno">-->
								<img class="pull-left img-rounded imagen-listado" src="https://image.flaticon.com/icons/png/512/45/45586.png">
							</div>
						</div>
					<div class="col-md-8">
						<p> {{restaurante.direccion}} </p>
						<div class="botones" *ngIf="confirmado != restaurante.id ">
							<div class="margin-top-20" *ngIf="hayUsuario">
								<p> <a [routerLink]="['/restaurantes', restaurante.id]" class="btn btn-primary">Ver más</a>
								<a *ngIf="(esAdmin) || ((restaurante.id_usuario == usuario.id) && (restaurante.validado == 1))" [routerLink]="['/editar-restaurantes', restaurante.id]" class="btn btn-warning">Editar</a>
								<a *ngIf="(esAdmin) || ((restaurante.id_usuario == usuario.id) && (restaurante.validado == 1))" (click)="borrarConfirm(restaurante.id)" class="btn btn-danger">Elimnar</a></p>
							</div>
							<div class="margin-top-20" *ngIf="!hayUsuario">
								<p> <a [routerLink]="['/restaurantes', restaurante.id]" class="btn btn-primary">Ver más</a></p>
							</div>

						</div>
						<div class="seguro" *ngIf="confirmado == restaurante.id">
							<a (click)="onDeleteRestaurante(restaurante.id, restaurante.nombre)" class="btn btn-danger">Quiero eliminarlo</a>
							<a (click)="cancelarConfirm()" class="btn btn-warning">Cancelar</a>
						</div>
					</div>
					</div>
				</div>
			</div>
			<div class="col-md-12" *ngIf="selected == 3">
				<agm-map 
					[latitude]="lat" 
					[longitude]="lng" 
					[zoom]="zoom"
					[mapTypeId]="'roadmap'"
					style="height: 500px"><!-- 'roadmap' | 'hybrid' | 'satellite' | 'terrain' -->
					<agm-marker *ngFor="let rest of restaurantes" [latitude]="convertStringToNumber(rest.latitud)" [longitude]="convertStringToNumber(rest.longitud)">
						<agm-info-window>
							<h5>{{rest.nombre}}</h5> 
							<h6> {{rest.direccion}}</h6>
							<h6> <a [routerLink]="['/restaurantes', rest.id]">Ver más</a></h6>
						</agm-info-window>
					</agm-marker>
				</agm-map>
			</div>
		</div>
		<!-- LISTA DE ÚLTIMOS COMENTARIOS --> 
		<div class="col-md-3">
			<h3 class="text-center text-muted"> Últimos comentarios </h3>
			<div class="col-md-12">
				<div class="thumbnail row-margin" *ngFor="let opinion of opinionesRecientes">
					<div class="panel-heading">
						<h5 class="panel-title"> {{opinion.fecha}}</h5>
					</div>
					<div class="panel-body">
						<p> {{opinion.mensaje}}</p>
					</div>
				</div>
			</div>
		</div>
	</div>
	<pagination-controls *ngIf="selected != 3" (pageChange)=" p1 = $event "></pagination-controls>
</div>